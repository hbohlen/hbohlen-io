# Story 2.1: Create Desktop Host Profile

## Status
Approved

## Story
**As a** system administrator,
**I want** to create a new host profile for my desktop machine,
**so that** I can begin defining its unique configuration.

## Acceptance Criteria
1. A new directory is created for the desktop host (e.g., `hosts/desktop`).
2. A basic `configuration.nix` and `flake.nix` output for the new host are created.
3. The new host can be built successfully with minimal default settings.

## Tasks / Subtasks
- [ ] Create desktop host directory structure (AC: 1)
  - [ ] Create `nixos/hosts/desktop/` directory
  - [ ] Create basic `configuration.nix` for desktop
  - [ ] Create basic `disko.nix` for desktop partitioning
- [ ] Update flake.nix with desktop configuration (AC: 2)
  - [ ] Add desktop output to `flake.nix`
  - [ ] Import necessary modules for desktop
  - [ ] Ensure desktop configuration can be referenced as `#desktop`
- [ ] Test desktop configuration build (AC: 3)
  - [ ] Run `nixos-rebuild build --flake .#desktop` to verify basic functionality
  - [ ] Ensure no syntax errors in configuration files

## Dev Notes

### Previous Story Insights
Story 1.2 successfully integrated the working ASUS Zephyrus M16 configuration into the flake structure. The laptop configuration is now fully functional with hardware-specific settings for NVIDIA graphics, ASUS battery management, and kernel parameters.

### Source Tree Information
- `nixos/hosts/laptop/configuration.nix` - Reference for basic structure
- `nixos/hosts/laptop/disko.nix` - Reference for partitioning approach
- `nixos/flake.nix` - Current flake structure to extend

### Technical Context
- Desktop will likely have different hardware than laptop (different CPU, GPU, storage)
- Should reuse common patterns from laptop configuration
- Will need separate disko configuration for desktop hardware
- Follow same modular structure as laptop for consistency

### File Locations
- `nixos/hosts/desktop/configuration.nix` - Desktop system configuration
- `nixos/hosts/desktop/disko.nix` - Desktop disk partitioning
- `nixos/flake.nix` - Updated with desktop output

### Testing
- **Testing Standards**: VM-First Validation where possible
- **Test file location**: Not applicable for this basic setup story
- **Test standards**: Basic build validation
- **Testing frameworks and patterns to use**: `nixos-rebuild build`
- **Testing requirements**: Desktop configuration must build without errors

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-09-17 | 1.0 | Initial draft | Claude (Integration Agent) |

## Dev Agent Record
_This section is to be populated by the development agent during implementation._</content>
</xai:function_call">Create Story 2.1 document